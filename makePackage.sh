
#!/bin/bash
currentDir=`pwd`
if [ -d ${currentDir}/oozieCompiled ]; then
rm -rf ${currentDir}/oozieCompiled
fi
echo
echo "Creating directories..."
echo
if [ ! -d ${currentDir}/oozieCompiled/scripts ]; then
mkdir -p ${currentDir}/oozieCompiled/scripts
fi

if [ ! -d ${currentDir}/oozieCompiled/lib ]; then
mkdir -p ${currentDir}/oozieCompiled/lib
fi

echo
echo "Creating JAR..."
echo
mvn clean package assembly:single
echo
echo "Creating Package..."
echo

cp ${currentDir}/oozie/pig-scripts/* ${currentDir}/oozieCompiled/scripts

cp ${currentDir}/target/*jar-with-dependencies.jar ${currentDir}/oozieCompiled/lib

cp ${currentDir}/oozie/workflows/binary-loaders/* ${currentDir}/oozieCompiled/

tar -cvzf oozieCompiled.tar.gz oozieCompiled/
echo
echo "Finished!"
echo
echo "Created package... at '${currentDir}/oozieCompiled.jar'"
echo
